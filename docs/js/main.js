let t={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""},S="";const d=document.querySelectorAll(".js_fieldset"),N=document.querySelectorAll(".js__paletteWrap"),n=document.querySelector(".js__previewCard"),y=document.querySelector(".js_hiddenSection");document.querySelector(".js_cardMessage");const j=document.querySelector(".js_cardSuccess"),b=document.querySelector(".js__inputName"),w=document.querySelector(".js__inputJob"),h=document.querySelector(".js__inputPhone"),q=document.querySelector(".js__inputMail"),k=document.querySelector(".js__inputLinkedin"),C=document.querySelector(".js__inputGithub"),$=document.querySelector(".js__profile-upload-btn"),f=document.querySelector(".js__namePreview"),_=document.querySelector(".js__jobPreview"),T=document.querySelector(".js__previewTlf"),I=document.querySelector(".js__previewMail"),M=document.querySelector(".js__previewLinkedin"),H=document.querySelector(".js__previewGithub"),v=document.querySelector(".js__profile-preview"),a=document.querySelector(".js__profile-image"),c=document.querySelector(".js_createCardBtn"),l=document.querySelector(".js_cardUrl"),L=document.querySelector(".js_twitterBtn"),E=document.querySelector(".js_link"),J=document.querySelector(".js__resetBtn"),m=document.querySelector(".js__icon");function O(e){const s=e.currentTarget.closest("fieldset");for(let r=0;r<d.length;r++){const o=d[r].closest("fieldset");o===s?o.classList.remove("collapsed"):o.classList.add("collapsed")}s.scrollIntoView()}for(let e=0;e<d.length;e++)d[e].addEventListener("click",O);function R(e){const s=e.currentTarget.dataset.id,r=Array.from(n.classList).filter(p=>p.includes("palette"));n.classList.remove(r),n.classList.add(`palette${s}`);const o=e.currentTarget.querySelector(".js_radioBtn");o&&(o.checked=!0),t.palette=s,c.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(t))}function U(e){if(t.palette===""){const s=Array.from(n.classList).filter(r=>r.includes("palette"));n.classList.remove(s),n.classList.add("palette1")}else{const s=JSON.parse(localStorage.getItem("personalData")),r=Array.from(n.classList).filter(B=>B.includes("palette"));n.classList.remove(r),n.classList.add(`palette${s.palette}`);const o=document.querySelector(".js_radioBtn1"),p=document.querySelector(".js_radioBtn2"),P=document.querySelector(".js_radioBtn3");s.palette==="1"?o.checked=!0:s.palette==="2"?p.checked=!0:P.checked=!0}}for(const e of N)e.addEventListener("click",R);const i={name:f.textContent,job:_.textContent,photo:a.src},A=()=>{f.innerHTML=t.name||i.name,_.innerHTML=t.job||i.job,a.src=t.photo||i.photo,T.href=`tel:${t.phone}`,I.href=`mailto:${t.email}`,M.href=`https://linkedin.com/in/${t.linkedin}`;const e=t.github.startsWith("@")?t.github.slice(1):t.github;H.href=`https://github.com/${e}`},F=e=>{t[e.target.name]=e.target.value,A(),c.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(t))},G=[b,w,h,q,k,C];G.forEach(e=>e.addEventListener("input",F));const x=e=>{const s=e.target.files[0];if(s){const r=new FileReader;r.onload=()=>{const o=r.result;v.style.backgroundImage=`url(${o})`,a.src=o,t.photo=o,localStorage.setItem("personalData",JSON.stringify(t))},r.readAsDataURL(s)}else console.error("No se ha seleccionado ningÃºn archivo.");c.removeAttribute("disabled"),u()};$.addEventListener("change",x);const g=JSON.parse(localStorage.getItem("personalData"));g!==null&&(t=g,U(),D(t));function D(e){b.value=e.name,w.value=e.job,h.value=e.phone,q.value=e.email,k.value=e.linkedin,C.value=e.github,e.photo===""?a.src=i.photo:a.src=e.photo,v.style.backgroundImage=`url(${e.photo})`,A()}const W=()=>{z(),V(),K(),Q(),u(),localStorage.setItem("personalData",JSON.stringify(t))},z=()=>{document.querySelector(".js_create-form").reset(),t={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""}},V=()=>{f.innerHTML="Nombre Apellido",_.innerHTML="Front-end developer",T.innerHTML='<a href="#" class="js__previewTlf"><i class="fa-solid fa-mobile-screen-button preview_contact--icon"></i></a>',I.innerHTML='<a href="#" class="js__previewMail"><i class="fa-regular fa-envelope preview_contact--icon"></i></a>',M.innerHTML='<a href="#" class="js__previewLinkedin"><i class="fa-brands fa-linkedin-in preview_contact--icon"></i></a>',H.innerHTML='<a href="#" class="js__previewGithub"><i class="fa-brands fa-github-alt preview_contact--icon"></i></a>',a.src="./images/img_prueba_preview.jpg",v.style.backgroundImage="",c.removeAttribute("disabled")},K=()=>{n.classList.remove("palette2"),n.classList.remove("palette3"),n.classList.add("palette1");const e=document.querySelectorAll(".js_radioBtn");e[0].checked=!0},u=()=>{y.classList.add("hidden")},Q=()=>{m.classList.remove("hidden")};J.addEventListener("click",W);const X=async e=>{e.preventDefault(),y.classList.remove("hidden"),c.setAttribute("disabled","");try{const r=await(await fetch("https://dev.adalab.es/api/card/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json();r.success?(j.innerHTML="La tarjeta ha sido creada:",L.classList.remove("hidden"),l.href=r.cardURL,l.innerHTML=r.cardURL,S=r.cardURL,E.href=`https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%2C%20puedes%20visualizarla%20en%20este%20enlace%3A%20&url=${S}`):(L.classList.add("hidden"),j.innerHTML="",l.innerHTML=`
                <p>Ha sucedido un error al cargar la tarjeta</p>
                <p>${r.error}</p>`),h.value===""?m.classList.add("hidden"):m.classList.remove("hidden")}catch(s){l.innerHTML=`<p>Error al crear la tarjeta: ${s.message}</p>`}};c.addEventListener("click",X);
//# sourceMappingURL=main.js.map
