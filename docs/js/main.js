let t={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""},v="";const d=document.querySelectorAll(".js_fieldset"),N=document.querySelectorAll(".js__paletteWrap"),n=document.querySelector(".js__previewCard"),y=document.querySelector(".js_hiddenSection");document.querySelector(".js_cardMessage");const L=document.querySelector(".js_cardSuccess"),b=document.querySelector(".js__inputName"),q=document.querySelector(".js__inputJob"),h=document.querySelector(".js__inputPhone"),w=document.querySelector(".js__inputMail"),k=document.querySelector(".js__inputLinkedin"),C=document.querySelector(".js__inputGithub"),$=document.querySelector(".js__profile-upload-btn"),f=document.querySelector(".js__namePreview"),S=document.querySelector(".js__jobPreview"),I=document.querySelector(".js__previewTlf"),T=document.querySelector(".js__previewMail"),M=document.querySelector(".js__previewLinkedin"),H=document.querySelector(".js__previewGithub"),_=document.querySelector(".js__profile-preview"),c=document.querySelector(".js__profile-image"),a=document.querySelector(".js_createCardBtn"),l=document.querySelector(".js_cardUrl"),g=document.querySelector(".js_twitterBtn"),E=document.querySelector(".js_link"),J=document.querySelector(".js__resetBtn"),m=document.querySelector(".js__icon");function O(e){const o=e.currentTarget.closest("fieldset");for(let r=0;r<d.length;r++){const s=d[r].closest("fieldset");s===o?s.classList.remove("collapsed"):s.classList.add("collapsed")}o.scrollIntoView()}for(let e=0;e<d.length;e++)d[e].addEventListener("click",O);function R(e){const o=e.currentTarget.dataset.id,r=Array.from(n.classList).filter(p=>p.includes("palette"));n.classList.remove(r),n.classList.add(`palette${o}`);const s=e.currentTarget.querySelector(".js_radioBtn");s&&(s.checked=!0),t.palette=o,a.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(t))}function U(e){if(t.palette===""){const o=Array.from(n.classList).filter(r=>r.includes("palette"));n.classList.remove(o),n.classList.add("palette1")}else{const o=JSON.parse(localStorage.getItem("personalData")),r=Array.from(n.classList).filter(B=>B.includes("palette"));n.classList.remove(r),n.classList.add(`palette${o.palette}`);const s=document.querySelector(".js_radioBtn1"),p=document.querySelector(".js_radioBtn2"),P=document.querySelector(".js_radioBtn3");o.palette==="1"?s.checked=!0:o.palette==="2"?p.checked=!0:P.checked=!0}}for(const e of N)e.addEventListener("click",R);const i={name:f.textContent,job:S.textContent,photo:c.src},A=()=>{f.innerHTML=t.name||i.name,S.innerHTML=t.job||i.job,c.src=t.photo||i.photo,I.href=`tel:${t.phone}`,T.href=`mailto:${t.email}`,M.href=`https://linkedin.com/in/${t.linkedin}`;const e=t.github.startsWith("@")?t.github.slice(1):t.github;H.href=`https://github.com/${e}`},F=e=>{t[e.target.name]=e.target.value,A(),a.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(t))},x=[b,q,h,w,k,C];x.forEach(e=>e.addEventListener("input",F));const D=e=>{const o=e.target.files[0];if(o){const r=new FileReader;r.onload=()=>{const s=r.result;_.style.backgroundImage=`url(${s})`,c.src=s,t.photo=s,localStorage.setItem("personalData",JSON.stringify(t))},r.readAsDataURL(o)}else console.error("No se ha seleccionado ningÃºn archivo.");a.removeAttribute("disabled"),u()};$.addEventListener("change",D);const j=JSON.parse(localStorage.getItem("personalData"));j!==null&&(t=j,U(),G(t));function G(e){b.value=e.name,q.value=e.job,h.value=e.phone,w.value=e.email,k.value=e.linkedin,C.value=e.github,e.photo===""?c.src=i.photo:c.src=e.photo,_.style.backgroundImage=`url(${e.photo})`,A()}const W=()=>{z(),V(),K(),Q(),u(),localStorage.setItem("personalData",JSON.stringify(t))},z=()=>{document.querySelector(".js_create-form").reset(),t={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""}},V=()=>{f.innerHTML="Nombre Apellido",S.innerHTML="Front-end developer",I.innerHTML="",T.innerHTML="",M.innerHTML="",H.innerHTML="",c.src="./images/img_prueba_preview.jpg",_.style.backgroundImage="",a.removeAttribute("disabled")},K=()=>{n.classList.remove("palette2"),n.classList.remove("palette3"),n.classList.add("palette1");const e=document.querySelectorAll(".js_radioBtn");e[0].checked=!0},u=()=>{y.classList.add("hidden")},Q=()=>{m.classList.remove("hidden")};J.addEventListener("click",W);const X=async e=>{e.preventDefault(),y.classList.remove("hidden"),a.setAttribute("disabled","");try{const r=await(await fetch("https://dev.adalab.es/api/card/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json();r.success?(L.innerHTML="La tarjeta ha sido creada:",g.classList.remove("hidden"),l.href=r.cardURL,l.innerHTML=r.cardURL,v=r.cardURL,E.href=`https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%2C%20puedes%20visualizarla%20en%20este%20enlace%3A%20&url=${v}`):(g.classList.add("hidden"),L.innerHTML="",l.innerHTML=`
                <p>Ha sucedido un error al cargar la tarjeta</p>
                <p>${r.error}</p>`),h.value===""?m.classList.add("hidden"):m.classList.remove("hidden")}catch(o){l.innerHTML=`<p>Error al crear la tarjeta: ${o.message}</p>`}};a.addEventListener("click",X);
//# sourceMappingURL=main.js.map
