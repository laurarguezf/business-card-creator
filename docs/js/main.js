let t={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""},v="";const d=document.querySelectorAll(".js_fieldset"),D=document.querySelectorAll(".js__paletteWrap"),s=document.querySelector(".js__previewCard"),y=document.querySelector(".js_hiddenSection");document.querySelector(".js_cardMessage");const L=document.querySelector(".js_cardSuccess"),b=document.querySelector(".js__inputName"),q=document.querySelector(".js__inputJob"),h=document.querySelector(".js__inputPhone"),w=document.querySelector(".js__inputMail"),k=document.querySelector(".js__inputLinkedin"),C=document.querySelector(".js__inputGithub"),N=document.querySelector(".js__profile-upload-btn"),f=document.querySelector(".js__namePreview"),S=document.querySelector(".js__jobPreview"),I=document.querySelector(".js__previewTlf"),T=document.querySelector(".js__previewMail"),M=document.querySelector(".js__previewLinkedin"),H=document.querySelector(".js__previewGithub"),_=document.querySelector(".js__profile-preview"),c=document.querySelector(".js__profile-image"),a=document.querySelector(".js_createCardBtn"),l=document.querySelector(".js_cardUrl"),g=document.querySelector(".js_twitterBtn"),$=document.querySelector(".js_link"),E=document.querySelector(".js__resetBtn"),m=document.querySelector(".js__icon");function J(e){const n=e.currentTarget.closest("fieldset");for(let r=0;r<d.length;r++){const o=d[r].closest("fieldset");o===n?o.classList.remove("collapsed"):o.classList.add("collapsed")}n.scrollIntoView()}for(let e=0;e<d.length;e++)d[e].addEventListener("click",J);function O(e){const n=e.currentTarget.dataset.id,r=Array.from(s.classList).filter(p=>p.includes("palette"));s.classList.remove(r),s.classList.add(`palette${n}`);const o=e.currentTarget.querySelector(".js_radioBtn");o&&(o.checked=!0),t.palette=n,a.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(t))}function R(e){if(t.palette===""){const n=Array.from(s.classList).filter(r=>r.includes("palette"));s.classList.remove(n),s.classList.add("palette1")}else{const n=JSON.parse(localStorage.getItem("personalData")),r=Array.from(s.classList).filter(B=>B.includes("palette"));s.classList.remove(r),s.classList.add(`palette${n.palette}`);const o=document.querySelector(".js_radioBtn1"),p=document.querySelector(".js_radioBtn2"),P=document.querySelector(".js_radioBtn3");n.palette==="1"?o.checked=!0:n.palette==="2"?p.checked=!0:P.checked=!0}}for(const e of D)e.addEventListener("click",O);const i={name:f.textContent,job:S.textContent,photo:c.src},A=()=>{f.innerHTML=t.name||i.name,S.innerHTML=t.job||i.job,c.src=t.photo||i.photo,I.href=`tel:${t.phone}`,T.href=`mailto:${t.email}`,M.href=`https://linkedin.com/in/${t.linkedin}`;const e=t.github.startsWith("@")?t.github.slice(1):t.github;H.href=`https://github.com/${e}`},U=e=>{t[e.target.name]=e.target.value,A(),a.removeAttribute("disabled"),u(),localStorage.setItem("personalData",JSON.stringify(t))},F=[b,q,h,w,k,C];F.forEach(e=>e.addEventListener("input",U));const x=e=>{const n=e.target.files[0];if(n){const r=new FileReader;r.onload=()=>{const o=r.result;_.style.backgroundImage=`url(${o})`,c.src=o,t.photo=o,localStorage.setItem("personalData",JSON.stringify(t))},r.readAsDataURL(n)}else console.error("No se ha seleccionado ningÃºn archivo.");a.removeAttribute("disabled"),u()};N.addEventListener("change",x);const j=JSON.parse(localStorage.getItem("personalData"));j!==null&&(t=j,R(),G(t));function G(e){b.value=e.name,q.value=e.job,h.value=e.phone,w.value=e.email,k.value=e.linkedin,C.value=e.github,e.photo===""?c.src=i.photo:c.src=e.photo,_.style.backgroundImage=`url(${e.photo})`,A()}const W=()=>{z(),V(),K(),Q(),u(),localStorage.setItem("personalData",JSON.stringify(t))},z=()=>{document.querySelector(".js_create-form").reset(),t={palette:"1",name:"",job:"",photo:"",phone:"",email:"",linkedin:"",github:""}},V=()=>{f.innerHTML="Nombre Apellido",S.innerHTML="Front-end developer",I.innerHTML="",T.innerHTML="",M.innerHTML="",H.innerHTML="",c.src="./images/img_prueba_preview.jpg",_.style.backgroundImage="",a.removeAttribute("disabled")},K=()=>{s.classList.remove("palette2"),s.classList.remove("palette3"),s.classList.add("palette1");const e=document.querySelectorAll(".js_radioBtn");e[0].checked=!0},u=()=>{y.classList.add("hidden")},Q=()=>{m.classList.remove("hidden")};E.addEventListener("click",W);const X=async e=>{e.preventDefault(),y.classList.remove("hidden"),a.setAttribute("disabled","");try{const r=await(await fetch("https://dev.adalab.es/api/card/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json();r.success?(L.innerHTML="La tarjeta ha sido creada:",g.classList.remove("hidden"),l.href=r.cardURL,l.innerHTML=r.cardURL,v=r.cardURL,$.href=`https://twitter.com/intent/tweet?text=He%20creado%20mi%20tarjeta%20de%20visita%2C%20puedes%20visualizarla%20en%20este%20enlace%3A%20&url=${v}`):(g.classList.add("hidden"),L.innerHTML="",l.innerHTML=`
                <p>Ha sucedido un error al cargar la tarjeta</p>
                <p>${r.error}</p>`),h.value===""?m.classList.add("hidden"):m.classList.remove("hidden")}catch(n){l.innerHTML=`<p>Error al crear la tarjeta: ${n.message}</p>`}};a.addEventListener("click",X);
//# sourceMappingURL=main.js.map
